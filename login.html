<!DOCTYPE html>
<html lang="es">
<header id="idHeader" class="miHeader container">
    <!-- Copiado desde script-template-->
</header>

<head id="idHead">

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FSP Bike's</title>

    <link rel="shortcut icon" href="./img/Logos/Logo05.png" type="image/x-icon">

    <link rel="stylesheet" href="./css/normalize.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">


    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"
        integrity="sha512-fD9DI5bZwQxOi7MhYWnnNPlvXdp/2Pj3XSTRrFs5FQa4mizyGLnJcN6tuvUS6LbmgN1ut+XGSABKvjN0H6Aoow=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://unpkg.com/swiper@8/swiper-bundle.min.css">
    <link rel="stylesheet" href="./css/style-novedades.css">
    <link rel="stylesheet" href="./css/style-template.css">
    <link rel="stylesheet" href="./css/style.css">
    
    <link rel="stylesheet" href="./css/style-login.css">
</head>


<body>

    <main class="miMain">
        <form novalidate>
        <section class="form-register">
            <h4><i class="fa fa-right-to-bracket"></i>  Inicia Sesión</h4>

            <div class="frmItem">
                <input class="controls" type="email" name="correo" id="idCorreo" placeholder="Ingrese su correo">
                <div id="idErrorMail" class="error"></div>
            </div>

            <div class="frmItem">
                <input class="controls" type="password" name="password" id="idPassword" placeholder="Ingrese su contraseña">
                <div id="idErrorPassword" class="error"></div>
            </div>

            <input type="checkbox" name="recordar" id="idRecordar"> Recordar

            <!--input class="botons" type="submit" value="Iniciar"-->
            <input class="botons" type="button" value="Iniciar"
                onclick="signOn(correo.value, password.value, recordar.value)">
         


            <p>¿No tenes Cuenta? <a href="./registracion.html">  Registrate</a></p>
            <div> <a href="index.html">Volver al Inicio</a></div>
        </section>
        </form>

    </main>


    <footer id="idFooter" class="miFooter">
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="js/script-template.js"></script>
   
    <script>
       
        $( ".controls" ).on( "focus", function() {
             $(this).siblings()[0].innerHTML="";
         } );
    
         function signOn(correo, password, recordar) {

                    var hayError = false;
                    var signoError = `<i class="fa fa-circle-exclamation"></i>`

                    if (correo.trim() == "") {
                        let wErrorMail = document.getElementById("idErrorMail");
                        wErrorMail.innerHTML = signoError + "  Debe informar Mail";
                        hayError = true;
                    }
                    else {
                        if (!localStorage.getItem("fsp-bike-usuario_" + correo + "_correo")) {
                            let wErrorMail = document.getElementById("idErrorMail");
                            wErrorMail.innerHTML = signoError + "  Mail no registrado.";
                            hayError = true;
                        }
                    }

                    if (password.trim() == "") {
                        let wErrorPassword = document.getElementById("idErrorPassword");
                        wErrorPassword.innerHTML = signoError + "  Debe informar Password";
                        hayError = true;
                    }
                    else {
                        let wPwd = localStorage.getItem("fsp-bike-usuario_" + correo + "_password");
                        if (wPwd != password.trim()) {
                            let wErrorPassword = document.getElementById("idErrorPassword");
                            wErrorPassword.innerHTML = signoError + "  Password incorrecto";
                            hayError = true;
                        }
                    }

                    if (!hayError) {
                        let wNombre = localStorage.getItem("fsp-bike-usuario_" + correo + "_nombre");
                        sessionStorage.setItem("fsp-bike-usuario", wNombre)

                        window.location.href = "./index.html";
                    }

                }

            

    
    </script>


</body>

</html>